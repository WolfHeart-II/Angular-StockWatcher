"use strict";angular.module("stockWatcher.Controllers",[]),angular.module("stockWatcher.Directives",[]),angular.module("stockWatcher.Filters",[]),angular.module("stockWatcher.Providers",[]),angular.module("stockWatcher.Services",[]),angular.module("stockWatcher",["ngRoute","ngAnimate","stockWatcher.Controllers","stockWatcher.Directives","stockWatcher.Services","stockWatcher.Providers","stockWatcher.Filters"]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"views/home-page.html",controller:"HomePageController"}).when("/about",{templateUrl:"views/about-page.html",controller:"AboutPageController"}).when("/quote/:stockSymbol",{templateUrl:"views/quoteDetails-page.html",controller:"QuoteDetailsPageController"}).when("/currency",{templateUrl:"views/currency-page.html",controller:"CurrencyPageController"}).otherwise({redirectTo:"/"})}]).config(["$compileProvider",function(e){var t=-1!==window.location.href.indexOf("http://localhost:8000/app");e.debugInfoEnabled(!t)}]).config(function(){String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,r){return"undefined"!=typeof e[r]?e[r]:t})})}).run(["$window","$rootScope",function(e,t){var r=!0;navigator&&navigator.onLine&&(r=navigator.onLine),t.$apply(function(){t.applicationIsOnline=r}),e.addEventListener?(e.addEventListener("online",function(){t.$apply(function(){t.applicationIsOnline=!0})},!1),e.addEventListener("offline",function(){t.$apply(function(){t.applicationIsOnline=!1})},!1)):(document.body.ononline=function(){t.$apply(function(){t.applicationIsOnline=!0})},document.body.onoffline=function(){t.$apply(function(){t.applicationIsOnline=!1})})}]).run(["$window","$rootScope",function(){"undefined"!=typeof Highcharts&&Highcharts.setOptions({global:{useUTC:!1}})}]),angular.module("stockWatcher.Controllers").controller("AboutPageController",["$scope",function(){}]),angular.module("stockWatcher.Controllers").controller("CurrencyChartController",["$scope","$interval","$timeout","currencyService","errorMessages",function(e,t,r,o,a){e.refreshInterval=60;var n="container"+e.fromCurrency+e.toCurrency;e.containerID=n;var s=void 0,i=void 0;e.fetchPreviousDayClosePrice=function(){var t=[e.symbol],r=stockService.getCurrentDataWithDetails(t);r.then(function(e){e.query.count>0&&(s=e.query.results.row.PreviousClose,"undefined"!=typeof s&&m())},function(e){if(e){var t=!0;"undefined"!=typeof e.error&&e.error===a.NoData.Error&&(t=!1),t&&console.error("Error while fetching data",e)}})};var l=function(t){i=new Highcharts.StockChart({chart:{renderTo:n},title:{text:e.fromCurrency+" to "+e.toCurrency},credits:{enabled:!1},rangeSelector:{buttons:[{type:"day",count:1,text:"1d"},{type:"day",count:2,text:"2d"},{type:"day",count:7,text:"5d"},{type:"all",text:"All"}],selected:0,allButtonsEnabled:!0},series:[{name:e.fromCurrency+" to "+e.toCurrency,type:"area",data:t,gapSize:5,tooltip:{valueDecimals:4},fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]},threshold:null}]}),"undefined"!=typeof s&&m()},c=function(){v(),l([null]),i.showLoading()};r(c,0);var d=e.fromCurrency,u=e.toCurrency,h=180,g="10d",v=function(){var e=o.getCurrencyExchangeRateHistory(d,u,h,g);e.then(function(e){e&&e.length>0?(i.hideLoading(),l(e)):(console.warn('"'+d+"-"+u+'" init did not receive data, refreshing it.'),v())},function(e){e&&console&&console.error&&console.error(e)})},p=function(){var e=o.getCurrencyExchangeRateHistory(d,u,h,g);e.then(function(e){e&&e.length>0?f(e):(console.warn('"'+d+"-"+u+'" update did not receive data, refreshing it.'),p())},function(e){e&&console&&console.error&&console.error(e)})},f=function(e){var t=i.series[0];t.setData(e),"undefined"!=typeof s&&m(),i.redraw()},m=function(){var t=e.fromCurrency+e.toCurrency,r=s;if(i){var o=t+"-open",a=i.yAxis[0];a.removePlotLine(o),a.addPlotLine({color:"red",dashStyle:"LongDash",id:o,label:{text:"Prev Close ($"+r+")"},width:1,zIndex:3,value:r})}};e.createRefresher=function(){return t(function(){p()},1e3*e.refreshInterval)},e.destroyRefresher=function(){"undefined"!=typeof e.refresher&&(t.cancel(e.refresher),e.refresher=void 0)},e.refreshIntervalChanged=function(){e.destroyRefresher(),e.createRefresher()},e.refresher=e.createRefresher(),e.$on("$destroy",function(){e.destroyRefresher(),"undefined"!=typeof i&&i.destroy()})}]),angular.module("stockWatcher.Controllers").controller("CurrencyPageController",["$scope",function(){}]),angular.module("stockWatcher.Controllers").controller("HomePageController",["$scope",function(){}]),angular.module("stockWatcher.Controllers").controller("MarketChartController",["$scope","$interval","stockService","errorMessages",function(e,t,r,o){e.refreshInterval=60,e.chartIsInitialized=!1;var a="containerMarkets";e.containerID=a;var n=void 0,s=void 0,i=[{symbol:".INX",name:"S&P 500",data:[]},{symbol:".DJI",name:"Dow Jones",data:[]},{symbol:"OSPTX",name:"S&P/TSX",data:[]}],l=[],c={title:"TSX, Dow Jones & S&P500 Indices"},d=function(){s=new Highcharts.StockChart({chart:{renderTo:a},title:{text:c.title},credits:{enabled:!1},navigator:{enabled:!1},rangeSelector:{buttons:[{type:"day",count:1,text:"1d"},{type:"day",count:2,text:"2d"},{type:"day",count:7,text:"5d"},{type:"all",text:"All"}],selected:0,allButtonsEnabled:!0},series:i,plotOptions:{series:{compare:"percent"}},yAxis:{labels:{formatter:function(){return(this.value>0?" + ":"")+this.value+"%"}},plotLines:[{value:0,width:2,color:"silver"}]},tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.change}%)<br/>',valueDecimals:2}}),"undefined"!=typeof n&&y(),e.chartIsInitialized=!0},u=60,h="10d",g=0,v=function(e,t){var a=i[e].symbol,n=i.length;l[e]=r.getLiveMarketData(a,u,h),l[e].then(function(e,t){return function(r){r&&r.length>0?"init"===t?(i[e].data=r,g++,g===n&&d()):"update"===t&&m(e,r):v(e,t)}}(e,t),function(e,t){return function(r){if(r){var a=!0;"undefined"!=typeof r.error&&r.error===o.NoData.Error&&(a=!1),a&&console.error("Error while fetching data",r)}v(e,t)}}(e,t))},p=function(){for(var e=0,t=i.length;t>e;e++)v(e,"init")};p();var f=function(){if("undefined"!=typeof s)for(var e=0,t=i.length;t>e;e++)v(e,"update")},m=function(e,t){var r=s.series[e];r.setData(t,!0,!0,!1),"undefined"!=typeof n&&y(),s.redraw()},y=function(){var t=e.fromCurrency+e.toCurrency,r=n;if(s){var o=t+"-open",a=s.yAxis[0];a.removePlotLine(o),a.addPlotLine({color:"red",dashStyle:"LongDash",id:o,label:{text:"Prev Close ($"+r+")"},width:1,zIndex:3,value:r})}};e.createRefresher=function(){return t(function(){f()},1e3*e.refreshInterval)},e.destroyRefresher=function(){angular.isDefined(k)&&(t.cancel(k),k=void 0)},e.refreshIntervalChanged=function(){e.destroyRefresher(),e.createRefresher()};var k=e.createRefresher();e.$on("$destroy",function(){e.destroyRefresher(),"undefined"!=typeof s&&s.destroy()}),e.$parent.$watch("showTitle",function(e){"undefined"!=typeof s&&(s.setTitle(e?{text:c.title}:{text:null}),s.reflow(),s.redraw())}),e.$parent.$watch("showZoom",function(e){"undefined"!=typeof s&&(s.rangeSelector.enabled=e,s.reflow(),s.redraw())}),e.$parent.$watch("showDatePicker",function(){}),e.$parent.$watch("showNavigator",function(e){if("undefined"!=typeof s){var t=s.scroller;e?(t.xAxis.labelGroup.show(),t.xAxis.gridGroup.show(),t.series.show(),t.navigatorGroup.show(),t.scrollbar.show(),t.scrollbarRifles.show(),t.scrollbarGroup.show(),$.each(t.elementsToDestroy,function(e,t){t.hide()})):(t.xAxis.labelGroup.hide(),t.xAxis.gridGroup.hide(),t.series.hide(),t.scrollbar.hide(),t.scrollbarGroup.hide(),t.scrollbarRifles.hide(),t.navigatorGroup.hide(),$.each(t.elementsToDestroy,function(e,t){t.hide()})),s.reflow(),s.redraw()}})}]),angular.module("stockWatcher.Controllers").controller("MarketChartWidgetController",["$scope",function(e){e.showTitle=!0,e.showZoom=!0,e.showDatePicker=!0,e.showNavigator=!0,e.toggleTitle=function(){e.showTitle=!e.showTitle},e.toggleZoom=function(){e.showZoom=!e.showZoom},e.toggleDatePicker=function(){e.showDatePicker=!e.showDatePicker},e.toggleNavigator=function(){e.showNavigator=!e.showNavigator}}]),angular.module("stockWatcher.Controllers").controller("QuoteDetailsPageController",["$scope","$interval","$routeParams","$location","stockService","errorMessages",function(e,t,r,o,a,n){e.$location=o,e.stockSymbol=r.stockSymbol,e.refreshInterval=30;var s=function(){var t=[e.stockSymbol],r=a.getCurrentDataWithDetails(t);r.then(function(t){e.stockData=t.query.results.row},function(e){if(e){var t=!0;"undefined"!=typeof e.error&&e.error===n.NoData.Error&&(t=!1),t&&console.error("Error while fetching data",e)}})};s(),e.createRefresher=function(){return t(function(){s()},1e3*e.refreshInterval)},e.destroyRefresher=function(){angular.isDefined(i)&&(t.cancel(i),i=void 0)},e.refreshIntervalChanged=function(){e.destroyRefresher(),e.createRefresher()};var i=e.createRefresher();e.$on("$destroy",function(){e.destroyRefresher()})}]),angular.module("stockWatcher.Controllers").controller("RouteController",["$scope","$route","$location",function(e,t){e.$on("$routeChangeSuccess",function(){e.controller=t.current.controller})}]),angular.module("stockWatcher.Controllers").controller("StockChartController",["$scope","$interval","$timeout","stockService","errorMessages",function(e,t,r,o,a){e.refreshInterval=60;var n="container"+e.symbol.replace(".","");e.containerID=n,e.yesterdayClosePrice=void 0,e.chart=void 0,e.initGraphPromise=void 0,e.updateGraphPromise=void 0;var s=function(){var t=[e.symbol],r=o.getCurrentDataWithDetails(t);r.then(function(t){if(t.query.count>0){var r=t.query.results.row.PreviousClose;r!==e.yesterdayClosePrice&&(e.yesterdayClosePrice=r,p())}},function(e){if(s(),e){var t=!0;"undefined"!=typeof e.error&&e.error===a.NoData.Error&&(t=!1),t&&console.error("Error while fetching data",e)}})};s();var i=function(t){e.chart=new Highcharts.StockChart({chart:{renderTo:n},title:{text:e.symbol+" Stock Price"},credits:{enabled:!1},rangeSelector:{buttons:[{type:"day",count:1,text:"1d"},{type:"day",count:2,text:"2d"},{type:"day",count:7,text:"5d"},{type:"all",text:"All"}],selected:0,allButtonsEnabled:!0},series:[{name:e.symbol,type:"area",data:t,gapSize:5,tooltip:{valueDecimals:2},fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]},threshold:null}]}),"undefined"!=typeof e.yesterdayClosePrice&&p()},l=function(){g(),i([null]),e.chart.showLoading()};r(l,0);var c=e.symbol.replace(".TO",""),d=e.symbol.indexOf("TO")>-1?"TSE":"NYSE",u=60,h="10d",g=function(){var t=o.getLiveData(c,d,u,h);t.then(function(t){t&&t.length>0?(e.chart.hideLoading(),i(t)):(console.warn('"'+c+'" init did not receive data, refreshing it.'),e.initGraphPromise=r(g,1e3))},function(e){g(),e.error!==a.NoData.Error&&console.error(e)})};e.updateGraph=function(){var t=o.getLiveData(c,d,u,h);t.then(function(t){t&&t.length>0?v(t):(console.warn('"'+c+'" update did not receive data, refreshing it.'),e.updateGraphPromise=r(e.updateGraph,1e3))},function(t){e.updateGraph(),t.error!==a.NoData.Error&&console.error(t)})};var v=function(t){var r=e.chart.series[0];r.setData(t)},p=function(){if("undefined"!=typeof e.chart){var t=e.yesterdayClosePrice,r=e.symbol+"-previousClose",o=e.chart.yAxis[0];o.removePlotLine(r),o.addPlotLine({color:"red",dashStyle:"LongDash",id:r,label:{text:"Prev Close ($"+t+")"},width:1,zIndex:3,value:t})}};e.createRefresher=function(){return t(function(){e.updateGraph()},1e3*e.refreshInterval)},e.createPreviousCloseRefresher=function(){return t(function(){s()},1e3*e.refreshInterval)},e.destroyRefresher=function(){"undefined"!=typeof e.refresher&&(t.cancel(e.refresher),e.refresher=void 0),"undefined"!=typeof e.previousCloseRefresher&&(t.cancel(e.previousCloseRefresher),e.previousCloseRefresher=void 0)},e.refreshIntervalChanged=function(){e.destroyRefresher(),e.createRefresher()},e.refresher=e.createRefresher(),e.previousCloseRefresher=e.createPreviousCloseRefresher(),e.$on("$destroy",function(){e.destroyRefresher(),"undefined"!=typeof e.initGraphPromise&&(r.cancel(e.initGraphPromise),e.initGraphPromise=void 0),"undefined"!=typeof e.updateGraphPromise&&(r.cancel(e.updateGraphPromise),e.updateGraphPromise=void 0),"undefined"!=typeof e.chart&&e.chart.destroy()})}]),angular.module("stockWatcher.Controllers").controller("StockListController",["$scope","$interval","stockService","errorMessages","storageService","applicationStorageService",function(e,t,r,o,a,n){e.refreshInterval=30,e.sortOrder="index",e.sortReversed=!1,e.quotesToFetch=[{symbol:"PG",yahooSymbol:"PG",liveData:{},index:0},{symbol:"T",yahooSymbol:"T.TO",liveData:{},index:1},{symbol:"BNS",yahooSymbol:"BNS.TO",liveData:{},index:2},{symbol:"TD",yahooSymbol:"TD.TO",liveData:{},index:3},{symbol:"PWF",yahooSymbol:"PWF.TO",liveData:{},index:4},{symbol:"FTS",yahooSymbol:"FTS.TO",liveData:{},index:5},{symbol:"BEP",yahooSymbol:"BEP-UN.TO",liveData:{},index:6},{symbol:"EMA",yahooSymbol:"EMA.TO",liveData:{},index:7},{symbol:"XIC",yahooSymbol:"XIC.TO",liveData:{},index:8},{symbol:"XSP",yahooSymbol:"XSP.TO",liveData:{},index:9}],e.stockQuotes=[];var s=function(){for(var t=[],a=0,n=e.quotesToFetch.length;n>a;a++)t.push(e.quotesToFetch[a].yahooSymbol);var s=r.getCurrentDataWithDetails(t);s.then(function(t){for(var r=0,o=t.query.count;o>r;r++)e.quotesToFetch[r].liveData=t.query.results.row[r];e.stockQuotes=e.quotesToFetch},function(e){if(e){var t=!0;"undefined"!=typeof e.error&&e.error===o.NoData.Error&&(t=!1),t&&console.error("Error while fetching data",e)}})};s(),e.addStockSuggestions=[],e.$watch("addStockName",function(t){if("undefined"!=typeof t){var o=r.getStockSymbol(t);o.then(function(t){e.addStockSuggestions=t},function(e){console.error(e)})}}),e.selectedStock=void 0,e.hasSelectedStock=!1,e.setSelectedStock=function(t){"undefined"!=typeof t?(e.selectedStock=t,e.hasSelectedStock=!0):(e.selectedStock=void 0,e.hasSelectedStock=!1,e.addStockName=void 0,e.addStockSuggestions=[])},e.saveSelectedStock=function(){e.quotesToFetch.push({symbol:e.selectedStock.symbol,yahooSymbol:e.selectedStock.symbol,liveData:{},index:e.quotesToFetch.length});for(var t=[],r=0,o=e.quotesToFetch.length;o>r;r++){var a=e.quotesToFetch[r];t.push({symbol:a.symbol,yahooSymbol:a.yahooSymbol,liveData:{},index:a.index})}n.setSavedStocks(t),s(),e.closeAddStockModal()},e.closeAddStockModal=function(){e.setSelectedStock(void 0)},e.createRefresher=function(){return t(function(){s()},1e3*e.refreshInterval)},e.destroyRefresher=function(){"undefined"!=typeof i&&(t.cancel(i),i=void 0)},e.refreshIntervalChanged=function(){e.destroyRefresher(),e.createRefresher()},e.setRefreshInterval=function(t){e.refreshInterval=t,e.refreshIntervalChanged()};var i=e.createRefresher();e.$on("$destroy",function(){e.destroyRefresher()})}]),angular.module("stockWatcher.Controllers").controller("StockListItemController",["$scope","stockService","errorMessages",function(e,t,r){var o=function(){var o=t.getLiveData(e.quote.symbol,e.quote.exchange,e.quote.interval,e.quote.period);o.then(function(t){e.liveQuotes=t},function(e){if(e){var t=!0;"undefined"!=typeof e.error&&e.error===r.NoData.Error&&(t=!1),t&&console.error("Error while fetching data",e)}})};o(),e.isGain=function(){if("undefined"!=typeof e.quote.liveData.Change){var t="+"===e.quote.liveData.Change[0];return t}return!1},e.isLoss=function(){if("undefined"!=typeof e.quote.liveData.Change){var t="-"===e.quote.liveData.Change[0];return t}return!1}}]),angular.module("stockWatcher.Controllers").controller("StockNewsController",["$scope","$interval","stockService","errorMessages",function(e,t,r,o){e.refreshInterval=5,e.newsItems=[];var a=0,n=function(){var t=r.getNewsFeedForStock(e.symbol);t.then(function(t){for(var r=t.length-1;r>=0;r--){var o=t[r],n=new Date(o.pubDate);n>a&&(e.newsItems.push(o),a=n)}},function(e){if(e){var t=!0;"undefined"!=typeof e.error&&e.error===o.NoData.Error&&(t=!1),t&&console.error("Error while fetching data",e)}})};n(),e.createRefresher=function(){return t(function(){n()},1e3*e.refreshInterval)},e.destroyRefresher=function(){"undefined"!=typeof s&&(t.cancel(s),s=void 0)},e.refreshIntervalChanged=function(){e.destroyRefresher(),e.createRefresher()},e.setRefreshInterval=function(t){e.refreshInterval=t,e.refreshIntervalChanged()};var s=e.createRefresher();e.$on("$destroy",function(){e.destroyRefresher()})}]),angular.module("stockWatcher.Filters").filter("percentage",["$filter",function(e){return function(t,r){function o(e){return!isNaN(e)&&isFinite(e)}var a=parseFloat(t,10);if(o(a)){var n=e("number")(a,r),s=n+"%";return s}return t}}]),angular.module("stockWatcher.Filters").filter("reverse",function(){return function(e){return e.constructor===Array?e.slice().reverse():e}}),angular.module("stockWatcher.Directives").directive("currencyChart",function(){return{restrict:"E",scope:{fromCurrency:"@",toCurrency:"@"},templateUrl:"views/currencyChart-partial.html",controller:"CurrencyChartController"}}),angular.module("stockWatcher.Directives").directive("marketChart",function(){return{restrict:"E",scope:{fetchTSX:"@",fetchDJ:"@"},templateUrl:"views/marketChart-partial.html",controller:"MarketChartController"}}),angular.module("stockWatcher.Directives").directive("marketChartWidget",function(){return{restrict:"E",scope:{fetchTSX:"@",fetchDJ:"@"},templateUrl:"views/marketChartWidget-partial.html",controller:"MarketChartWidgetController"}}),angular.module("stockWatcher.Directives").directive("navigationBar",function(){return{restrict:"E",templateUrl:"views/navigationBar-partial.html",controller:"RouteController"}}),angular.module("stockWatcher.Directives").directive("stockChart",function(){return{restrict:"E",scope:{symbol:"@"},templateUrl:"views/stockChart-partial.html",controller:"StockChartController"}}),angular.module("stockWatcher.Directives").directive("stockList",function(){return{restrict:"E",templateUrl:"views/stockList-partial.html",controller:"StockListController"}}),angular.module("stockWatcher.Directives").directive("stockListItem",function(){return{restrict:"A",scope:{quote:"="},templateUrl:"views/stockListItem-partial.html",controller:"StockListItemController"}}),angular.module("stockWatcher.Directives").directive("stockNews",function(){return{restrict:"E",scope:{symbol:"@"},templateUrl:"views/stockNews-partial.html",controller:"StockNewsController"}}),angular.module("stockWatcher.Providers").provider("appConfig",function(){var e="AngularStockWatcher_localStorage_",t={JSONPTimeout:1e4,StorageKeys:{StoredQuotes:e+"storedQuotes",StoredStockListField:e+"storedStockListSortingField",StoredStockListOrder:e+"storedStockListSortingDirection"}};return{set:function(e,r){t[e]=r},$get:function(){return t}}}),angular.module("stockWatcher.Providers").provider("errorMessages",function(){var e={NoData:{Error:"NoData",Message:"No data received"},Timeout:{Error:"Timeout",Message:"Request took longer than {0}ms"},YQL:{Error:"YQLError",Message:'Check "data" for details'}};return{set:function(t,r){e[t]=r},$get:function(){return e}}}),angular.module("stockWatcher.Services").factory("applicationStorageService",["$window","appConfig","storageService",function(e,t,r){var o={},a=function(e){return o[e]},n=function(e,t){o[e]=t},s=function(){var e=t.StorageKeys.StoredQuotes,o=a(e);if(o)return o;var n=angular.fromJson(r.getData(e));return n},i=function(e){var o=t.StorageKeys.StoredQuotes;n(o,e);var a=angular.toJson(e);r.setData(o,a)},l=function(){var e=t.StorageKeys.StoredStockListField,o=a(e);if(o)return o;var n=r.getData(e);return n},c=function(e){var o=t.StorageKeys.StoredStockListField;n(o,e),r.setData(o,e)},d=function(){var e=t.StorageKeys.StoredStockListOrder,o=a(e);if(o)return o;var n=r.getData(e);return"true"===n||1===n?!0:!1},u=function(e){var o=t.StorageKeys.StoredStockListOrder,a=JSON.parse(e);n(o,a),r.setData(o,a)};return{getSavedStockSymbols:s,setSavedStocks:i,getStockListSortingField:l,setStockListSortingField:c,getStockListSortingDirection:d,setStockListSortingDirection:u}}]),angular.module("stockWatcher.Services").factory("currencyService",["$q","$http",function(e,t){var r=function(r,o){var a=e.defer(),n='select * from yahoo.finance.xchange where pair in ("'+r+o+'")',s="&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=JSON_CALLBACK",i="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(n)+s;return t.jsonp(i).success(function(e){var t={};e.query.count>0&&(t=e.query.results.rate,t.Ask=parseFloat(t.Ask,10),t.Bid=parseFloat(t.Bid,10),t.Rate=parseFloat(t.Rate,10)),a.resolve(t)}),a.promise},o=function(r,o,a,n){var s=e.defer(),i=0,l="http://www.google.com/finance/getprices?q="+r+o+"&i="+a+"&p="+n+"&f=d,c,v,k,o,h,l&df=cpct&auto=0&ei=Ef6XUYDfCqSTiAKEMg",c='SELECT * FROM csv WHERE url="'+l+'"',d="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(c)+"&format=json&callback=JSON_CALLBACK";return t.jsonp(d).success(function(e){var t=[],r=new Date,o=null!==e.query.results&&e.query.results.row.length>=7;if(e.query&&e.query.count>0&&o){var n=0;e.query.results.row[6]&&(n=parseInt(e.query.results.row[6].col0.replace("TIMEZONE_OFFSET=",""),10));for(var l=parseInt(e.query.results.row[7].col0.replace("a",""),10)+60*n,c=0,d=7;d<e.query.count;d++){"a"===e.query.results.row[d].col0[0]?(l=parseInt(e.query.results.row[d].col0.replace("a",""),10)+60*n,c=0):c=parseInt(e.query.results.row[d].col0,10);var u=new Date(1e3*(l+c*a+60*r.getTimezoneOffset()));if(u>i){var h=parseFloat(e.query.results.row[d].col1,10),g=[u,h];i=u,t.push(g)}}}s.resolve(t)}),s.promise};return{getCurrencyExchangeRate:r,getCurrencyExchangeRateHistory:o}}]),angular.module("stockWatcher.Services").factory("stockService",["$q","$http","$timeout","appConfig","errorMessages",function(e,t,r,o,a){var n=[["a0","Ask"],["a2","AverageDailyVolume"],["a5","AskSize"],["b0","Bid"],["b2","AskRealTime"],["b3","BidRealTime"],["b4","BookValue"],["b6","BidSize"],["c0","ChangeAndPercentChange"],["c1","Change"],["c3","Commission"],["c4","Currency"],["c6","ChangeRealTime"],["c8","AfterHoursChangeRealTime"],["d0","DividendPerShare"],["d1","LastTradeDate"],["d2","TradeDate"],["e0","EarningsPerShare"],["e1","ErrorIndication"],["e7","EPSEstimateCurrentYear"],["e8","EPSEstimateNextYear"],["e9","EPSEstimateNextQuarter"],["h0","DaysHigh"],["j0","_52WeekLow"],["k0","_52WeekHigh"],["g0","DaysLow"],["g1","HoldingsGainPercent"],["g3","AnnualizedGain"],["g4","HoldingsGain"],["g5","HoldingsGainPercentRealTime"],["g6","HoldingsGainRealTime"],["i0","MoreInfo"],["i5","OrderBookRealTime"],["j0","YearLow"],["j1","MarketCapitalization"],["j3","MarketCapRealTime"],["j4","EBITDA"],["j5","ChangeFrom52WeekLow"],["j6","PercentChangeFrom52WeekLow"],["k0","YearHigh"],["k1","LastTradeRealTimeWithTime"],["k2","ChangePercentRealTime"],["k4","ChangeFrom52WeekHigh"],["k5","PercentChangeFrom52WeekHigh"],["l0","LastTradeWithTime"],["l1","LastTradePriceOnly"],["l2","HighLimit"],["l3","LowLimit"],["m0","DaysRange"],["m2","DaysRangeRealTime"],["m3","_50DayMovingAverage"],["m4","_200DayMovingAverage"],["m5","ChangeFrom200DayMovingAverage"],["m6","PercentChangeFrom200DayMovingAverage"],["m7","ChangeFrom50DayMovingAverage"],["m8","PercentChangeFrom50DayMovingAverage"],["n0","Name"],["n4","Notes"],["o0","Open"],["p0","PreviousClose"],["p1","PricePaid"],["p2","ChangeInPercent"],["p5","PricePerSales"],["p6","PricePerBook"],["q0","ExDividendDate"],["r0","PERatio"],["r1","DividendPayDate"],["r2","PERatioRealTime"],["r5","PEGRatio"],["r6","PricePerEPSEstimateCurrentYear"],["r7","PricePerEPSEstimateNextYear"],["s0","Symbol"],["s1","SharesOwned"],["s6","Revenue"],["s7","ShortRatio"],["t1","LastTradeTime"],["t7","TickerTrend"],["t8","_1YearTargetPrice"],["v0","Volume"],["v1","HoldingsValue"],["v7","HoldingsValueRealTime"],["w0","_52WeekRange"],["w1","DaysValueChange"],["w4","DaysValueChangeRealTime"],["x0","StockExchange"],["y0","DividendYield"]],s=function(n,s,i){var l=e.defer(),c=e.defer(),d=!1,u=void 0,h='select * from yahoo.finance.historicaldata where symbol = "'+n+'" and startDate = "'+s+'" and endDate = "'+i+'"',g="&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=JSON_CALLBACK",v="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(h)+g;return t.jsonp(v,{timeout:c.promise}).success(function(e){var t=[];e.query.count>0&&(t=e.query.results.quote),0===e.query.count&&l.reject({error:a.NoData.Error,message:a.NoData.Message}),r.cancel(u),c.reject(),l.resolve(t)}).error(function(e){l.reject(d?{error:a.Timeout.Error,message:a.Timeout.Message.format(o.JSONPTimeout),data:e}:e)}),u=r(function(){d=!0,c.resolve()},o.JSONPTimeout),l.promise},i=function(n){for(var s=e.defer(),i=e.defer(),l=!1,c=void 0,d=[],u=0,h=n.length;h>u;u++)d.push('"'+n[u]+'"');var g="select * from yahoo.finance.quote where symbol in ("+d.join(",")+")",v="&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=JSON_CALLBACK",p="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(g)+v;return t.jsonp(p,{timeout:i.promise}).success(function(e){var t=[];e.query.count>0&&(t=e.query.results.quote),0===e.query.count&&s.reject({error:a.NoData.Error,message:a.NoData.Message}),r.cancel(c),i.reject(),s.resolve(t)}).error(function(e){s.reject(l?{error:a.Timeout.Error,message:a.Timeout.Message.format(o.JSONPTimeout),data:e}:e)}),c=r(function(){l=!0,i.resolve()},o.JSONPTimeout),s.promise},l=function(s){for(var i=e.defer(),l=e.defer(),c=!1,d=void 0,u=s.join(","),h=[],g=[],v=0,p=n.length;p>v;v++){var f=n[v];h.push(f[0]),g.push(f[1])}h=h.join(""),g=g.join(",");var m="http://download.finance.yahoo.com/d/quotes.csv?s="+u+"&f="+h+"&e=.csv",y="select * from csv where url='"+m+"' and columns='"+g+"'",k="&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=JSON_CALLBACK",S="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(y)+k;return t.jsonp(S,{timeout:l.promise}).success(function(e){if(0===e.query.count)i.reject({error:a.NoData.Error,message:a.NoData.Message});else if(1===e.query.count)e.query.results.row.ChangeInPercent=parseFloat(e.query.results.row.ChangeInPercent,10);else for(var t=0,o=e.query.count;o>t;t++)e.query.results.row[t].ChangeInPercent=parseFloat(e.query.results.row[t].ChangeInPercent,10);r.cancel(d),l.reject(),i.resolve(e)}).error(function(e){i.reject(c?{error:a.Timeout.Error,message:a.Timeout.Message.format(o.JSONPTimeout),data:e}:e)}),d=r(function(){c=!0,l.resolve()},o.JSONPTimeout),i.promise},c=function(n,s,i,l){var c=e.defer(),d=e.defer(),u=!1,h=void 0,g=0,v="http://www.google.com/finance/getprices?q="+n+(null===s?"":"&x="+s)+"&i="+i+"&p="+l+"&f=d,c,v,k,o,h,l&df=cpct&auto=0&ei=Ef6XUYDfCqSTiAKEMg",p='SELECT * FROM csv WHERE url="'+v+'"',f="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(p)+"&format=json&callback=JSON_CALLBACK";return t.jsonp(f,{timeout:d.promise}).success(function(e){var t=[],o=new Date,n=null!==e.query.results&&e.query.results.row.length>=7;if(e.query&&e.query.count>0&&n){var s=0;e.query.results.row[6]&&(s=parseInt(e.query.results.row[6].col0.replace("TIMEZONE_OFFSET=",""),10));for(var l=parseInt(e.query.results.row[7].col0.replace("a",""),10)+60*s,u=0,v=7;v<e.query.count;v++){"a"===e.query.results.row[v].col0[0]?(l=parseInt(e.query.results.row[v].col0.replace("a",""),10)+60*s,u=0):u=parseInt(e.query.results.row[v].col0,10);var p=new Date(1e3*(l+u*i+60*o.getTimezoneOffset()));if(p>g){var f=parseFloat(e.query.results.row[v].col1,10),m=[p,f];g=p,t.push(m)}}}0===t.length&&c.reject({error:a.NoData.Error,message:a.NoData.Message}),r.cancel(h),d.reject(),c.resolve(t)}).error(function(e){c.reject(u?{error:a.Timeout.Error,message:a.Timeout.Message.format(o.JSONPTimeout),data:e}:e)}),h=r(function(){u=!0,d.resolve()},o.JSONPTimeout),c.promise},d=function(e,t,r){return c(e,null,t,r)},u=function(n){var s=e.defer(),i=e.defer(),l=!1,c=void 0,d="http://feeds.finance.yahoo.com/rss/2.0/headline?s="+n+"&region=CA",u="select * from feed where url='"+d+"'",h="&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=JSON_CALLBACK",g="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(u)+h;return t.jsonp(g,{timeout:i.promise}).success(function(e){if("undefined"!=typeof e.error)return void s.reject({error:a.YQL.Error,message:a.YQL.Message,data:e.error});var t=e.query.count;0===t&&s.reject({error:a.NoData.Error,message:a.NoData.Message}),r.cancel(c),i.reject(),s.resolve(e.query.results.item)}).error(function(e){s.reject(l?{error:a.Timeout.Error,message:a.Timeout.Message.format(o.JSONPTimeout),data:e}:e)}),c=r(function(){l=!0,i.resolve()},o.JSONPTimeout),s.promise},h=function(t){var a=e.defer(),n=e.defer(),s=!1,i=void 0,l=window.YAHOO={Finance:{SymbolSuggest:{}}};l.Finance.SymbolSuggest.ssCallback=function(e){r.cancel(i),n.reject(),a.resolve(e.ResultSet.Result)};var c="http://autoc.finance.yahoo.com/autoc?query="+t+"&callback=YAHOO.Finance.SymbolSuggest.ssCallback";return $.getScript(c),i=r(function(){s=!0,n.resolve()},o.JSONPTimeout),a.promise};return{getHistoricalData:s,getLiveData:c,getLiveMarketData:d,getCurrentData:i,getCurrentDataWithDetails:l,getStockSymbol:h,getNewsFeedForStock:u}}]),angular.module("stockWatcher.Services").factory("storageService",["$window",function(e){var t=function(t,r){var o=e.localStorage;o&&o.setItem(t,r)},r=function(t){var r=e.localStorage;return r?r.getItem(t):void 0},o=function(t){var r=e.localStorage;r&&r.removeItem(t)},a=function(){var t=e.localStorage;t&&t.clear()};return{setData:t,getData:r,deleteData:o,deleteAllData:a}}]),angular.module("stockWatcher").run(["$templateCache",function(e){e.put("views/about-page.html","<h1>About</h1><div>About Page for <em>Angular StockWatcher</em></div>"),e.put("views/currency-page.html",'<h1>Currencies</h1><div>Currency Page for <em>Angular StockWatcher</em></div><div class="page-header"><h2>Canadian Dollar (CAD)</h2></div><div class="row"><div class="col-sm-6"><currency-chart from-currency="CAD" to-currency="USD"></currency-chart></div><div class="col-sm-6"><currency-chart from-currency="CAD" to-currency="EUR"></currency-chart></div></div><div class="page-header"><h2>US Dollar (USD)</h2></div><div class="row"><div class="col-sm-6"><currency-chart from-currency="USD" to-currency="CAD"></currency-chart></div><div class="col-sm-6"><currency-chart from-currency="USD" to-currency="EUR"></currency-chart></div></div>'),e.put("views/currencyChart-partial.html",'<div id="{{ containerID }}"></div>'),e.put("views/home-page.html",'<h1>Home</h1><div>Home Page for <em>Angular StockWatcher</em></div><div><stock-list></stock-list></div><div class="page-header"><h2>Charts</h2></div><div class="row"><div class="col-sm-6"><stock-chart symbol="PG"></stock-chart></div><div class="col-sm-6"><stock-chart symbol="T.TO"></stock-chart></div><div class="col-sm-6"><stock-chart symbol="BNS.TO"></stock-chart></div><div class="col-sm-6"><stock-chart symbol="TD.TO"></stock-chart></div></div><div class="row"><div class="col-sm-6"><market-chart-widget></market-chart-widget></div><div class="col-sm-6"><div class="page-header"><h2>Currencies</h2></div><currency-chart from-currency="CAD" to-currency="USD"></currency-chart></div></div>'),e.put("views/marketChart-partial.html",'<div ng-hide="chartIsInitialized"><div class="alert alert-info" role="alert"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate text-center"></span> <strong>Loading data...</strong> Chart will display soon.</div></div><div id="{{ containerID }}"></div>'),e.put("views/marketChartWidget-partial.html",'<div class="row"><div class="col-sm-12"><div class="page-header" style="margin-top: 20px;"><div class="row"><div class="col-sm-8"><h2>Market Indices</h2></div><div class="col-sm-4" style="margin-top: 20px;"><div class="dropdown text-right"><button class="btn btn-primary dropdown-toggle btn-sm" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true"><span class="glyphicon glyphicon-cog" aria-hidden="true"></span> Config <span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="dropdownMenu1"><li role="presentation" class="small"><a role="menuitem" tabindex="-1" href="javascript:;" ng-click="toggleTitle()"><span class="glyphicon" ng-class="{\'glyphicon-ok\': showTitle, \'glyphicon-none\': !showTitle}" aria-hidden="true"></span> Show Title</a></li><li role="presentation" class="small disabled"><a role="menuitem" tabindex="-1" href="javascript:;" ng-click="toggleZoom()"><span class="glyphicon" ng-class="{\'glyphicon-ok\': showZoom, \'glyphicon-none\': !showZoom}" aria-hidden="true"></span> Show Zoom</a></li><li role="presentation" class="small disabled"><a role="menuitem" tabindex="-1" href="javascript:;" ng-click="toggleDatePicker()"><span class="glyphicon" ng-class="{\'glyphicon-ok\': showDatePicker, \'glyphicon-none\': !showDatePicker}" aria-hidden="true"></span> Show Date Picker</a></li><li role="presentation" class="small"><a role="menuitem" tabindex="-1" href="javascript:;" ng-click="toggleNavigator()"><span class="glyphicon" ng-class="{\'glyphicon-ok\': showNavigator, \'glyphicon-none\': !showNavigator}" aria-hidden="true"></span> Show Navigator</a></li><li class="divider"></li><li role="presentation" class="small disabled"><a role="menuitem" tabindex="-1" href="#">Export Config</a></li><li role="presentation" class="small disabled"><a role="menuitem" tabindex="-1" href="#">Import Config</a></li></ul></div></div></div></div><market-chart fetch-tsx="true" fetch-dj="true"></market-chart></div></div>'),e.put("views/navigationBar-partial.html",'<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="#/">Angular StockWatcher</a></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav"><li ng-class="{active: controller == \'HomePageController\'}"><a href="#/">Home</a></li><li ng-class="{active: controller == \'CurrencyPageController\'}"><a href="#/currency">Currencies</a></li><li ng-class="{active: controller == \'AboutPageController\'}"><a href="#/about">About</a></li><li class="disabled"><a href="#contact">Contact</a></li><li class="dropdown disabled"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Dropdown <span class="caret"></span></a><ul class="dropdown-menu" role="menu"><li><a href="#">Action</a></li><li><a href="#">Another action</a></li><li><a href="#">Something else here</a></li><li class="divider"></li><li class="dropdown-header">Nav header</li><li><a href="#">Separated link</a></li><li><a href="#">One more separated link</a></li></ul></li></ul></div></div></nav>'),e.put("views/quoteDetails-page.html",'<h1>Quote Details</h1><div>Quote Details Page for <em>Angular StockWatcher</em></div><div class="page-header"><h2>{{ stockData.Name }} ({{ stockData.Symbol }})</h2></div><div class="row"><div class="col-sm-4"><table class="table table-striped table-condensed"><tbody><tr><td><strong>Previous Close:</strong></td><td class="text-right">{{ stockData.PreviousClose | currency }}</td></tr><tr><td><strong>Open:</strong></td><td class="text-right">{{ stockData.Open | currency }}</td></tr><tr><td><strong>Currency:</strong></td><td class="text-right">{{ stockData.Currency }}</td></tr><tr><td><strong>Bid (Real-time):</strong></td><td class="text-right">{{ stockData.BidRealTime | currency }}</td></tr><tr><td><strong>Ask (Real-time):</strong></td><td class="text-right">{{ stockData.AskRealTime | currency }}</td></tr><tr><td><strong>1-Year Target Estimate:</strong></td><td class="text-right">{{ stockData._1YearTargetPrice | currency }}</td></tr><tr><td><strong>Day\'s Range:</strong></td><td class="text-right">{{ stockData.DaysLow | currency }} - {{ stockData.DaysHigh | currency }}</td></tr><tr><td><strong>52-Week Range:</strong></td><td class="text-right">{{ stockData._52WeekLow | currency }} - {{ stockData._52WeekHigh | currency }}</td></tr><tr><td><strong>Volume:</strong></td><td class="text-right">{{ stockData.Volume | number }}</td></tr><tr><td><strong>Average Daily Volume:</strong></td><td class="text-right">{{ stockData.AverageDailyVolume | number }}</td></tr><tr><td><strong>Market Capitalization:</strong></td><td class="text-right">{{ stockData.MarketCapitalization }}</td></tr><tr><td><strong>P/E (ttm) (Real-time):</strong></td><td class="text-right">{{ stockData.PERatioRealTime }}</td></tr><tr><td><strong>EPS (ttm):</strong></td><td class="text-right">{{ stockData.EarningsPerShare }}</td></tr><tr><td><strong>Last Trade Date:</strong></td><td class="text-right">{{ stockData.LastTradeDate }}</td></tr><tr><td><strong>Ex-Dividend Date:</strong></td><td class="text-right">{{ stockData.ExDividendDate }}</td></tr><tr><td><strong>Dividend Pay Date:</strong></td><td class="text-right">{{ stockData.DividendPayDate }}</td></tr><tr><td><strong>Dividend Yield:</strong></td><td class="text-right">{{ stockData.DividendYield }}</td></tr></tbody></table></div><div class="col-sm-8"><stock-chart symbol="{{ $location.path().replace(\'/quote/\', \'\') }}"></stock-chart></div><div class="col-sm-8"><stock-news symbol="{{ $location.path().replace(\'/quote/\', \'\') }}"></stock-news></div></div>'),e.put("views/stockChart-partial.html",'<div id="{{ containerID }}"></div>'),e.put("views/stockList-partial.html",'<div class="page-header"><div class="row"><div class="col-sm-8"><h2>Watchlist</h2></div><div class="col-sm-4"><div class="btn-group pull-right" style="margin-top: 20px;"><button type="button" class="btn btn-primary dropdown-toggle btn-sm" data-toggle="dropdown" aria-expanded="false">Refresh interval <span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right" role="menu"><li role="presentation" class="small"><a href="javascript:;" ng-click="setRefreshInterval(30)"><span class="glyphicon" ng-class="{\'glyphicon-ok\': refreshInterval === 30, \'glyphicon-none\': refreshInterval !== 30}" aria-hidden="true"></span> 30 sec</a></li><li role="presentation" class="small"><a href="javascript:;" ng-click="setRefreshInterval(60)"><span class="glyphicon" ng-class="{\'glyphicon-ok\': refreshInterval === 60, \'glyphicon-none\': refreshInterval !== 60}" aria-hidden="true"></span> 60 sec</a></li><li role="presentation" class="small"><a href="javascript:;" ng-click="setRefreshInterval(300)"><span class="glyphicon" ng-class="{\'glyphicon-ok\': refreshInterval === 300, \'glyphicon-none\': refreshInterval !== 300}" aria-hidden="true"></span> 5 min</a></li><li role="presentation" class="small"><a href="javascript:;" ng-click="setRefreshInterval(900)"><span class="glyphicon" ng-class="{\'glyphicon-ok\': refreshInterval === 900, \'glyphicon-none\': refreshInterval !== 900}" aria-hidden="true"></span> 15 min</a></li></ul></div><button type="button" class="btn btn-primary btn-sm pull-right" data-toggle="modal" data-target="#addStockModal" style="margin-top: 20px; margin-right: 10px;">Add Stock</button></div></div></div><div class="row"><div class="table-responsive"><table class="table table-striped table-hover table-condensed"><thead><tr><th ng-click="sortOrder = \'index\'; sortReversed = !sortReversed;"># <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'index\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'index\' && sortReversed === true}" aria-hidden="true"></span></th><th ng-click="sortOrder = \'liveData.Symbol\'; sortReversed = !sortReversed;">Symbol <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'liveData.Symbol\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'liveData.Symbol\' && sortReversed === true}" aria-hidden="true"></span></th><th ng-click="sortOrder = \'liveData.Name\'; sortReversed = !sortReversed;">Name <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'liveData.Name\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'liveData.Name\' && sortReversed === true}" aria-hidden="true"></span></th><th ng-click="sortOrder = \'liveData.LastTradePriceOnly\'; sortReversed = !sortReversed;">Trade Price <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'liveData.LastTradePriceOnly\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'liveData.LastTradePriceOnly\' && sortReversed === true}" aria-hidden="true"></span></th><th ng-click="sortOrder = \'liveData.Change\'; sortReversed = !sortReversed;">Change <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'liveData.Change\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'liveData.Change\' && sortReversed === true}" aria-hidden="true"></span></th><th ng-click="sortOrder = \'liveData.ChangeInPercent\'; sortReversed = !sortReversed;">% Change <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'liveData.ChangeInPercent\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'liveData.ChangeInPercent\' && sortReversed === true}" aria-hidden="true"></span></th><th ng-click="sortOrder = \'liveData.DividendYield\'; sortReversed = !sortReversed;">Yield <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'liveData.DividendYield\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'liveData.DividendYield\' && sortReversed === true}" aria-hidden="true"></span></th><th ng-click="sortOrder = \'liveData.PERatio\'; sortReversed = !sortReversed;">P/E <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'liveData.PERatio\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'liveData.PERatio\' && sortReversed === true}" aria-hidden="true"></span></th><th ng-click="sortOrder = \'liveData.EarningsPerShare\'; sortReversed = !sortReversed;">EPS <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'liveData.EarningsPerShare\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'liveData.EarningsPerShare\' && sortReversed === true}" aria-hidden="true"></span></th><th colspan="2" ng-click="sortOrder = \'liveData._52WeekLow\'; sortReversed = !sortReversed;">52 week-Range <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'liveData._52WeekLow\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'liveData._52WeekLow\' && sortReversed === true}" aria-hidden="true"></span></th><th ng-click="sortOrder = \'liveData.StockExchange\'; sortReversed = !sortReversed;">Ex <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'liveData.StockExchange\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'liveData.StockExchange\' && sortReversed === true}" aria-hidden="true"></span></th><th>See more</th></tr></thead><tbody><tr stock-list-item="" class="animate-repeat" ng-repeat="quote in stockQuotes | orderBy:sortOrder:sortReversed" quote="quote"></tr><tr ng-hide="stockQuotes.length > 0"><td colspan="13" class="text-center"><strong>Loading data...</strong></td></tr></tbody></table></div></div><div class="modal fade" id="addStockModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel">Add Stock to Watchlist</h4></div><div class="modal-body"><form><div class="form-group"><label for="addStockName">Stock Name</label> <input type="text" class="form-control" id="addStockName" placeholder="Enter Stock Name" ng-model="addStockName"></div></form><div class="table-responsive"><table class="table table-striped" ng-show="addStockSuggestions.length > 0"><thead><tr><th class="col-md-1 text-center">Select</th><th class="col-md-2">Name</th><th class="col-md-6">Symbol</th><th class="col-md-3">Exchange</th><th class="col-md-1">Type</th></tr></thead><tbody><tr ng-repeat="stockSuggestion in addStockSuggestions"><td class="col-md-1 text-center"><input type="radio" name="addStockChosen" value="{{ stockSuggestion.name }}" ng-click="setSelectedStock(stockSuggestion)"></td><th class="col-md-2" scope="row">{{ stockSuggestion.symbol }}</th><td class="col-md-7">{{ stockSuggestion.name }}</td><td class="col-md-2">{{ stockSuggestion.exchDisp }}</td><td class="col-md-1">{{ stockSuggestion.typeDisp }}</td></tr></tbody></table></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal" ng-click="closeAddStockModal()">Cancel</button> <button type="button" class="btn btn-primary" data-dismiss="modal" ng-class="{ disabled: !hasSelectedStock }" ng-click="saveSelectedStock()">Add Stock</button></div></div></div></div>'),e.put("views/stockListItem-partial.html",'<td class="text-right">{{ quote.index + 1 }}</td><td>{{ quote.liveData.Symbol }}</td><td>{{ quote.liveData.Name }}</td><td class="text-right">{{ quote.liveData.LastTradePriceOnly | currency }} {{ quote.liveData.Currency }}</td><td class="text-right" ng-class="{ \'text-success\': isGain(), \'text-danger\': isLoss() }">{{ quote.liveData.Change | currency }}</td><td class="text-right" ng-class="isGain() ? \'text-success\' : (isLoss() ? \'text-danger\' : \'\')">{{ quote.liveData.ChangeInPercent | percentage:2 }}</td><td class="text-right">{{ quote.liveData.DividendYield | percentage:2 }}</td><td class="text-right">{{ quote.liveData.PERatio }}</td><td class="text-right">{{ quote.liveData.EarningsPerShare | number:2 }}</td><td class="text-right">{{ quote.liveData._52WeekLow | currency }}</td><td class="text-right">{{ quote.liveData._52WeekHigh | currency }}</td><td>{{ quote.liveData.StockExchange }}</td><td><a href="#/quote/{{ quote.yahooSymbol }}" class="btn btn-default btn-xs" role="button" title="See details about {{ quote.symbol }}"><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span> Details</a></td>'),e.put("views/stockNews-partial.html",'<div class="page-header"><h3>News</h3></div><div class="row"><div class="table-responsive"><table class="table table-striped"><thead></thead><tbody><tr class="animate-repeat" ng-repeat="newsItem in newsItems | reverse"><td class="col-md-4"><p><a href="{{ newsItem.link }}" target="blank" title="{{ newsItem.title }}">{{ newsItem.title }}</a></p><p>{{ newsItem.pubDate }}</p></td><td class="col-md-8">{{ newsItem.description }}</td></tr></tbody></table></div></div>')
}]);